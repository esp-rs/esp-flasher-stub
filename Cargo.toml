[package]
name = "stub"
version = "0.1.0"
edition = "2021"

[dependencies]
heapless = "0.7.10"
esp-backtrace = { version = "0.2.0", features = ["panic-handler", "exception-handler", "print-uart"], optional = true }
mockall_double = "0.1.0"
md-5 = { version = "0.10.1", default-features = false }
nb = "1.0.0"
esp-hal-common = { package = "esp-hal-common", git = "https://github.com/esp-rs/esp-hal" }
esp32-hal = { package = "esp32-hal", git = "https://github.com/esp-rs/esp-hal", optional = true }
esp32c3-hal = { package = "esp32c3-hal", git = "https://github.com/esp-rs/esp-hal", optional = true }

[target.'cfg(target_arch = "xtensa")'.dependencies]
xtensa-lx = "0.7.0"
xtensa-lx-rt = "0.13.0"
[target.'cfg(target_arch = "riscv32")'.dependencies]
riscv-rt = "0.9.0"
riscv = "0.8.0"

[features]
esp32 = [ "esp32-hal", "esp-backtrace", "esp-backtrace?/esp32" ]
esp32c3 = [ "esp32c3-hal", "esp-backtrace", "esp-backtrace?/esp32c3" ]

[profile.release]
strip = true  # Automatically strip symbols from the binary.
opt-level = "z"
codegen-units = 1
lto = true
panic = "abort"